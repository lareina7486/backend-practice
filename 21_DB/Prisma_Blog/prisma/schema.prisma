// PostreSQL에 prisma_blog DB 생성 완료

// Prisma Client 생성 설정 (DB에 요청 보냄 === DB 클라이언트)
generator client {
    provider = "prisma-client" // prisma-client-js 사용하는 경우도 있음
    output   = "../generated/prisma" // output 지정 필수, 상대경로
}

// 데이터베이스 연결 설정
// Prisma ORM 7에서는 환경 변수를 자동 로드 X -> dotenv-cli 사용 또는 Prisma Config에 명시
datasource db {
    provider = "postgresql"
    // url = env("DATABASE_URL")
}

// 사용자 테이블 정의
model User {
    id        Int      @id @default(autoincrement()) // @id: Primary Key
    //id        String   @id @default(cuid() 또는 uuid)  // 고유 식별자 생성(String)
    email     String   @unique
    name      String?
    posts     Post[] // Post 모델들의 배열
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

// 게시글 테이블 정의
model Post {
    id        Int      @id @default(autoincrement())
    title     String
    content   String?                        // ?(Optional): @default() 지정하지 않으면 null이 기본값
  //content   String?  @default('내용 없음')   // 값이 없으면 default 내용, 명시적으로 null 지정 가능
    published Boolean  @default(false)

    // onDelete 옵션: Cascade, SetNull(자식데이터 보존), Restrict, NoAction(DB설정 따름)
    author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
    authorId  Int

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt           // 레코드 수정 될때마다, 자동으로 현재시간으로 업데이트
}
